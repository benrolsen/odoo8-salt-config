This repo contains Salt Masterless files to quickly set up an Odoo 8.0 environment. Ideally, both Ubuntu 14.04
and CentOS 7 should be supported.

To get started on a new VM, first install git:
(Ubuntu) apt-get install git
(CentOS) yum install git

Do the same for salt-minion if available. For CentOS 7, you'll need to install the EPEL:
rpm -Uvh http://archive.linux.duke.edu/pub/epel/beta/7/x86_64/epel-release-7-0.2.noarch.rpm

Download this repo to /srv/salt on the VM:
cd /srv/salt
git clone https://github.com/benrolsen/odoo8-salt-config.git .

Copy the minion conf file to the appropriate place:
mkdir /etc/salt/minion.d
cp minion-conf /etc/salt/minion.d/odoo-minion.conf

Tell Salt to run all configurations:
salt-call --local state.highstate

Start the Odoo server on CentOS 7:
systemctl start odoo-server

To update the odoo code, first change to the odoo user:
su - odoo
Then update the odoo and odoo-custom-addons code bases:
cd /opt/dooo
git pull
cd /opt/odoo-custom-addons
git pull

You'll need to stop the odoo-server service and manually reload all the DB data from files:
(as root) systemctl stop odoo-server
(as odoo) /opt/odoo/openerp-server -c /etc/odoo/odoo-server.conf -u all
Make sure to load a page so the reload happens, and then kill the manual process
(as root) systemctl start odoo-server
